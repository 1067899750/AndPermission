
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Instal apps Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../overlay/" />
    
    
    <link rel="prev" href="../runtime/constant.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../runtime/">
            
                <a href="../runtime/">
            
                    
                    Runtime Permissons
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../runtime/constant.html">
            
                <a href="../runtime/constant.html">
            
                    
                    Permission Constants
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter active" data-level="1.3" data-path="./">
            
                <a href="./">
            
                    
                    Instal apps
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../overlay/">
            
                <a href="../overlay/">
            
                    
                    Overlay Drawing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../fileuri/">
            
                <a href="../fileuri/">
            
                    
                    Share Private Files
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../notify/">
            
                <a href="../notify/">
            
                    
                    Notification
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../notify/show.html">
            
                <a href="../notify/show.html">
            
                    
                    Show Notifications
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../notify/access.html">
            
                <a href="../notify/access.html">
            
                    
                    Access Notifications
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Instal apps</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="request-to-install-unknown-source-apk">Request to install unknown source apk</h1>
<p>Need to add <code>android.permission.REQUEST_INSTALL_PACKAGES</code> permission in <code>manifest.xml</code> before using, and to ensure that the app has <strong>Storage</strong> permissions.</p>
<p>In the simplest case, you only need to pass the path of the apk file to complete the installation process:</p>
<pre><code class="lang-java">File apkFile = ...;

AndPermission.with(<span class="hljs-keyword">this</span>)
    .install()
    .file(apkFile)
    .start();
</code></pre>
<p>At this point, if you do not have permission to install an application from an unknown source, the setup page is automatically opened to request the user to open it.</p>
<p>If the developer wants to improve the experience. For example, if there is no permission, a dialog will be played to let the user choose whether to start the setting screen, and according to the user&apos;s choice to make a statistic:</p>
<pre><code class="lang-java">File apkFile = ...;

AndPermission.with(<span class="hljs-keyword">this</span>)
    .install()
    .file(apkFile)
    .rationale(<span class="hljs-keyword">new</span> Rationale&lt;File&gt;() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">showRationale</span><span class="hljs-params">(Context c, File f, RequestExecutor e)</span> </span>{
            <span class="hljs-comment">// Startup settings: e.execute();</span>
            <span class="hljs-comment">// Cancel: e.cancel();</span>
        }
    })
    .onGranted(<span class="hljs-keyword">new</span> Action&lt;File&gt;() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onAction</span><span class="hljs-params">(File data)</span> </span>{
        }
    })
    .onDenied(<span class="hljs-keyword">new</span> Action&lt;File&gt;() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onAction</span><span class="hljs-params">(File data)</span> </span>{
        }
    })
    .start();
</code></pre>
<p>When <code>showRationale()</code> is called back without the <code>REQUEST_INSTALL_PACKAGES</code> permission, the developer must call <code>RequestExecutor#execute()</code> to initiate the setting or <code>RequestExecutor#cancel()</code> to cancel the startup setting, ortherwise AndPermission will have no response.</p>
<p>When <code>showRationale()</code> is called back it is a good idea to display a Dialog to solicit the user&apos;s comments, whether to launch the setup page authorization <strong>Install Unknown Source App</strong> permissions, call <code>RequestExecutor#execute()</code> or <code>RequestExecutor#cancel()</code> depending on the user&apos;s choice`.</p>
<p>When <code>onGranted()</code> is called back, the user agrees to the permission and will immediately enter the installation page, the user clicks on the installation system will automatically install the target Apk into the system; when <code>onDenied()</code> is called back, the user has denied the permission, and will immediately exit the installation page. Developers can do some necessary statistics when these two methods are called.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../runtime/constant.html" class="navigation navigation-prev " aria-label="Previous page: Permission Constants">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../overlay/" class="navigation navigation-next " aria-label="Next page: Overlay Drawing">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Instal apps","level":"1.3","depth":1,"next":{"title":"Overlay Drawing","level":"1.4","depth":1,"path":"overlay/README.md","ref":"overlay/README.md","articles":[]},"previous":{"title":"Permission Constants","level":"1.2.1","depth":2,"path":"runtime/constant.md","ref":"runtime/constant.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"install/README.md","mtime":"2019-02-26T05:45:06.868Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-02-26T06:01:11.955Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

